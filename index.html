<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Budget Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Dark theme / card layout -->
  <link rel="stylesheet" href="src/css/styles.css" />
</head>
<body>
  <div class="app">
    <!-- TOP BAR -->
    <header class="top-bar">
      <div class="top-bar__title">Budget Dashboard</div>

      <!-- Tabs (radio-based, styled by CSS) -->
      <div class="top-bar__tabs">
        <input type="radio" name="main-tabs" id="tab-radio-dashboard" checked />
        <label for="tab-radio-dashboard" class="tab-label">Dashboard</label>

        <input type="radio" name="main-tabs" id="tab-radio-transactions" />
        <label for="tab-radio-transactions" class="tab-label">Transactions</label>

        <input type="radio" name="main-tabs" id="tab-radio-categories" />
        <label for="tab-radio-categories" class="tab-label">Categories</label>

        <input type="radio" name="main-tabs" id="tab-radio-import" />
        <label for="tab-radio-import" class="tab-label">Import</label>
      </div>

      <!-- Period selector (JS hides it on non-dashboard tabs) -->
      <div class="top-bar__filters">
        <span class="top-bar__filters-label">Period:</span>
        <select id="period-select" class="filter-select">
          <option value="1m">Last 1 month</option>
          <option value="3m">Last 3 months</option>
          <option value="6m" selected>Last 6 months</option>
          <option value="ytd">Year to date</option>
          <option value="custom">Custom</option>
        </select>

        <div id="custom-range" class="custom-range hidden">
          <label>
            From:
            <input type="date" id="date-from" />
          </label>
          <label>
            To:
            <input type="date" id="date-to" />
          </label>
        </div>
      </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="main-layout">
      <!-- DASHBOARD TAB -->
      <section id="tab-dashboard" class="tab-panel">
        <div class="card">
          <h2>Income statement</h2>
          <p class="card-subtitle">
            Summary of income and expenses for the selected period.
          </p>
          <div id="income-statement" class="income-statement">
            <!-- Filled by JS -->
          </div>
        </div>
      </section>

      <!-- TRANSACTIONS TAB -->
      <section id="tab-transactions" class="tab-panel">
        <div class="card">
          <h2>Transactions</h2>

          <!-- Filters row -->
          <div class="transactions-filters">
            <div class="transactions-filters__row">
              <label>
                Search:
                <input
                  type="text"
                  id="tx-search"
                  placeholder="Description, account, category..."
                />
              </label>

              <label>
                Account:
                <select id="tx-filter-account" class="filter-select">
                  <option value="all">All accounts</option>
                </select>
              </label>

              <label>
                Category:
                <select id="tx-filter-category" class="filter-select">
                  <option value="all">All categories</option>
                </select>
              </label>

              <label>
                Labels:
                <input
                  type="text"
                  id="tx-filter-label"
                  placeholder="Search labels"
                />
              </label>
            </div>

            <div class="transactions-filters__row">
              <label>
                Date:
                <select id="tx-filter-date-mode" class="filter-select">
                  <option value="any">Any</option>
                  <option value="on">On</option>
                  <option value="before">Before</option>
                  <option value="after">After</option>
                  <option value="between">Between</option>
                </select>
              </label>

              <label>
                From:
                <input type="date" id="tx-date-from" />
              </label>

              <label>
                To:
                <input type="date" id="tx-date-to" />
              </label>

              <div class="transactions-filters__actions">
                <button id="add-transaction" class="primary-button">
                  Add transaction
                </button>
                <button id="delete-selected" class="secondary-button">
                  Delete selected
                </button>
              </div>
            </div>
          </div>

          <!-- Bulk actions -->
          <div class="transactions-bulk">
            <div class="transactions-bulk__group">
              <label>
                Set category:
                <select id="bulk-category-select" class="filter-select">
                  <option value="none">Select category</option>
                </select>
              </label>
              <button id="apply-bulk-category" class="secondary-button">
                Apply to selected
              </button>
            </div>

            <div class="transactions-bulk__group">
              <label>
                Add label:
                <input
                  type="text"
                  id="bulk-label-input"
                  placeholder="e.g. Work, Trip"
                />
              </label>
              <button id="apply-bulk-label" class="secondary-button">
                Apply to selected
              </button>
            </div>
          </div>

          <!-- Table -->
          <div class="table-wrapper">
            <table class="transactions-table">
              <thead>
                <tr>
                  <th></th>
                  <th id="tx-header-date" class="sortable">Date</th>
                  <th>Description</th>
                  <th>Original amount</th>
                  <th>Converted amount</th>
                  <th>Category</th>
                  <th>Account</th>
                  <th>Labels</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="transactions-body">
                <!-- Filled by JS -->
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- CATEGORIES TAB -->
      <section id="tab-categories" class="tab-panel">
        <div class="card">
          <div class="card-header-row">
            <h2>Categories</h2>
            <button id="open-category-editor" class="secondary-button">
              Edit categories
            </button>
          </div>
          <p class="card-subtitle">
            Collapsible category tree. Edit the structure via the popup editor.
          </p>

          <div id="category-tree-tab" class="category-tree">
            <!-- Filled by JS -->
          </div>
        </div>
      </section>

      <!-- IMPORT TAB -->
      <section id="tab-import" class="tab-panel">
        <div class="card">
          <h2>Import transactions</h2>
          <p class="card-subtitle">
            Upload a PocketSmith CSV export. You can append to or replace the
            existing transactions.
          </p>

          <div class="import-row">
            <label>
              CSV file:
              <input type="file" id="import-file" accept=".csv" />
            </label>
          </div>

          <div class="import-row">
            <label>
              <input type="checkbox" id="import-clear-existing" />
              Clear existing transactions before import
            </label>
          </div>

          <div class="import-row">
            <button id="import-button" class="primary-button">
              Import CSV
            </button>
          </div>

          <div id="import-status" class="import-status"></div>
        </div>
      </section>
    </main>
  </div>

  <!-- CATEGORY EDITOR MODAL -->
  <div id="category-editor-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <h3>Edit categories</h3>
      <p class="modal-description">
        Use dashes to indicate levels. Example:<br />
        <code>Income</code><br />
        <code>-Base Salary</code><br />
        <code>-Performance Bonus</code><br />
        <code>Food &amp; Drinks</code><br />
        <code>-Restaurants</code><br />
        <code>--Lunch</code>
      </p>
      <textarea
        id="categories-editor-modal"
        rows="16"
        class="modal-textarea"
      ></textarea>

      <div class="modal-actions">
        <button id="cancel-categories" class="secondary-button">Cancel</button>
        <button id="apply-categories" class="primary-button">
          Update categories
        </button>
      </div>
    </div>
  </div>

  <!-- TRANSACTION EDITOR MODAL -->
  <div id="transaction-editor-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <h3 id="tx-modal-title">Add transaction</h3>

      <div class="modal-grid">
        <label>
          Date
          <input type="date" id="tx-modal-date" />
        </label>

        <label>
          Description
          <input type="text" id="tx-modal-description" />
        </label>

        <label>
          Original amount
          <input type="number" step="0.01" id="tx-modal-original-amount" />
        </label>

        <label>
          Original currency
          <input type="text" id="tx-modal-original-currency" value="AED" />
        </label>

        <label>
          Converted amount
          <input type="number" step="0.01" id="tx-modal-converted-amount" />
        </label>

        <label>
          Converted currency
          <input type="text" id="tx-modal-converted-currency" value="AED" />
        </label>

        <label>
          Account
          <input type="text" id="tx-modal-account" />
        </label>

        <label>
          Category
          <select id="tx-modal-category" class="filter-select">
            <!-- Filled by JS -->
          </select>
        </label>

        <label class="modal-grid--full">
          Labels (comma separated)
          <input type="text" id="tx-modal-labels" />
        </label>
      </div>

      <div class="modal-actions">
        <button id="tx-modal-cancel" class="secondary-button">Cancel</button>
        <button id="tx-modal-save" class="primary-button">Save</button>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script src="app.js"></script>
</body>
</html>
